const urlGeo="http://api.openweathermap.org/geo/1.0/direct",urlWeather="https://api.openweathermap.org/data/2.5/weather",key="b8c763881bde95df3bc652f6049e4738",svgPath="images/svg-animated/",citySearch=document.getElementById("city-search"),searchForm=document.getElementById("search-form"),weatherIcons=[{key:"clear sky",iconName:"clear-sky.svg",weather:"Sunny"},{key:"few clouds",iconName:"partly-cloudy.svg",weather:"Partly cloudy"},{key:"scattered clouds",iconName:"cloudy.svg",weather:"Cloudy"},{key:"broken clouds",iconName:"cloudy.svg",weather:"Cloudy"},{key:"overcast clouds",iconName:"cloudy.svg",weather:"Cloudy"},{key:"shower rain",iconName:"rainy.svg",weather:"Rainy"},{key:"light rain",iconName:"rainy.svg",weather:"Rainy"},{key:"rain",iconName:"rainy.svg",weather:"Rainy"},{key:"thunderstorm",iconName:"thundery.svg",weather:"Thundery"},{key:"snow",iconName:"snowy.svg",weather:"Snowy"},{key:"mist",iconName:"foggy.svg",weather:"Foggy"}],getWeatherIcon=function(e){const t=weatherIcons.find((t=>t.key===e));return!!t&&t.iconName},getWeatherDescriptionByKey=function(e){const t=weatherIcons.find((t=>t.key===e));return!!t&&t.weather},months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],addZeroPrepend=e=>1==String(e).length?"0"+e:e,getCoordinates=function(e){return new Promise(((t,n)=>{let r={};fetch(`${urlGeo}?q=${e}&appid=${key}`).then((e=>e.json())).then((e=>{r.city=e[0].local_names.en,r.lat=e[0].lat,r.lon=e[0].lon,t(r)})).catch((e=>{console.log(e),alert("city not found")}))})).then((e=>e))},getWeather=function(e,t){let n={};return new Promise(((r,a)=>{fetch(`${urlWeather}?lat=${e}&lon=${t}&appid=${key}`).then((e=>e.json())).then((e=>{n.city=e.name,n.temperature=Math.round(e.main.temp-273.15),n.weatherDescription=e.weather[0].description,r(n)}))}))},renderWeatherInfo=function(e){const t=document.getElementById("city-name"),n=document.getElementById("weather-icon"),r=document.getElementById("temperature"),a=document.getElementById("weather-description");t.innerText=e.city,n.src=`${svgPath}${getWeatherIcon(e.weatherDescription)}`,r.innerText=e.temperature,a.innerText=getWeatherDescriptionByKey(e.weatherDescription)},printWeatherByCity=function(e){getCoordinates(e).then((e=>getWeather(e.lat,e.lon))).then((e=>{renderWeatherInfo(e)}))};printWeatherByCity("pskov"),searchForm.addEventListener("submit",(e=>{e.preventDefault(),printWeatherByCity(citySearch.value),citySearch.value=""}));
//# sourceMappingURL=script.min.js.map